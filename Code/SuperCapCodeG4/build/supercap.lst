ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"supercap.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/supercap.c"
  20              		.section	.text.Supercap_PID_Controller_Function,"ax",%progbits
  21              		.align	1
  22              		.global	Supercap_PID_Controller_Function
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	Supercap_PID_Controller_Function:
  28              	.LVL0:
  29              	.LFB335:
   1:Core/Src/supercap.c **** /**
   2:Core/Src/supercap.c ****   ******************************************************************************
   3:Core/Src/supercap.c ****   * @file    supercap.c
   4:Core/Src/supercap.c ****   * @brief   This file provides code for the configuration
   5:Core/Src/supercap.c ****   *          of all used supercap pins.
   6:Core/Src/supercap.c ****   */
   7:Core/Src/supercap.c **** /* USER CODE END Header */
   8:Core/Src/supercap.c **** #include "supercap.h"
   9:Core/Src/supercap.c **** 
  10:Core/Src/supercap.c **** //Timmer
  11:Core/Src/supercap.c **** void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim) {
  12:Core/Src/supercap.c **** 	if(htim->Instance == TIM5){
  13:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
  14:Core/Src/supercap.c ****     TIM5_NVIC();
  15:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_RESET);
  16:Core/Src/supercap.c **** 	}
  17:Core/Src/supercap.c ****   else if(htim->Instance == TIM2) {
  18:Core/Src/supercap.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
  19:Core/Src/supercap.c ****     TIM2_NVIC();
  20:Core/Src/supercap.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_RESET);
  21:Core/Src/supercap.c ****   }
  22:Core/Src/supercap.c **** }
  23:Core/Src/supercap.c **** 
  24:Core/Src/supercap.c **** void TIM2_NVIC(){
  25:Core/Src/supercap.c ****   /*
  26:Core/Src/supercap.c ****   Supercap_Average_ADC_Function(&C_left);
  27:Core/Src/supercap.c ****   Supercap_Average_ADC_Function(&C_sys);
  28:Core/Src/supercap.c ****   Supercap_Average_ADC_Function(&C_right);
  29:Core/Src/supercap.c ****   Supercap_Average_ADC_Function(&V_sys_op);
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 2


  30:Core/Src/supercap.c ****   Supercap_Average_ADC_Function(&V_cap_op);
  31:Core/Src/supercap.c ****   Supercap_Average_ADC_Function(&V_cap);
  32:Core/Src/supercap.c ****   Supercap_Average_ADC_Function(&V_bat);
  33:Core/Src/supercap.c ****   Supercap_Average_ADC_Function(&V_sys);
  34:Core/Src/supercap.c ****   Supercap_Average_ADC_Function(&V_1V6);5
  35:Core/Src/supercap.c ****   Supercap_Average_ADC_Function(&ADC4_3);
  36:Core/Src/supercap.c ****   */
  37:Core/Src/supercap.c ****  /*
  38:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&C_left, 8);
  39:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&C_sys, 6); //100kHz
  40:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&C_right, 4);
  41:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&V_1V6, 2);
  42:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&ADC4_12,2);
  43:Core/Src/supercap.c ****   */
  44:Core/Src/supercap.c **** 
  45:Core/Src/supercap.c ****   //set 2, simple test
  46:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&C_sys, 6);
  47:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&C_right, 4);
  48:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&ADC4_12,2);
  49:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&V_bat, 2);
  50:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&V_cap, 2);
  51:Core/Src/supercap.c **** }
  52:Core/Src/supercap.c **** 
  53:Core/Src/supercap.c **** void TIM5_NVIC(){
  54:Core/Src/supercap.c ****   /*
  55:Core/Src/supercap.c ****   Supercap_PID_Controller_Function(&In_loop_PID, &V_cap, Out_loop_PID.output);
  56:Core/Src/supercap.c **** 	Supercap_PID_Controller_Function(&In_loop_PID, &V_cap, 2600);
  57:Core/Src/supercap.c ****   Supercap_PWM_left(In_loop_PID.output);
  58:Core/Src/supercap.c ****   */
  59:Core/Src/supercap.c ****   //Supercap_PWM_left(100);
  60:Core/Src/supercap.c **** 
  61:Core/Src/supercap.c ****   //simple test, outloop
  62:Core/Src/supercap.c ****   Supercap_PID_Controller_Function(&Out_loop_PID, &C_right, 2200); 
  63:Core/Src/supercap.c ****   In_loop_PID.output = 300 * (Out_loop_PID.output / V_bat.real_value_12bits);
  64:Core/Src/supercap.c ****   Supercap_PWM_left(In_loop_PID.output);
  65:Core/Src/supercap.c **** }
  66:Core/Src/supercap.c **** 
  67:Core/Src/supercap.c **** void Supercap_PID_Controller_Function(_Supercap_PID_Controller_t *pid_controller, _ADC_Sample_t *ad
  30              		.loc 1 67 126 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  68:Core/Src/supercap.c **** 	pid_controller->error = target - adc_sample->real_value_12bits;
  35              		.loc 1 68 2 view .LVU1
  36              		.loc 1 68 45 is_stmt 0 view .LVU2
  37 0000 8B89     		ldrh	r3, [r1, #12]
  38              		.loc 1 68 33 view .LVU3
  39 0002 D21A     		subs	r2, r2, r3
  40              	.LVL1:
  41              		.loc 1 68 33 view .LVU4
  42 0004 12B2     		sxth	r2, r2
  43              		.loc 1 68 24 view .LVU5
  44 0006 8281     		strh	r2, [r0, #12]	@ movhi
  69:Core/Src/supercap.c ****   pid_controller->error_sum += pid_controller->error * pid_controller->Ki;
  45              		.loc 1 69 3 is_stmt 1 view .LVU6
  46              		.loc 1 69 17 is_stmt 0 view .LVU7
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 3


  47 0008 90ED047A 		vldr.32	s14, [r0, #16]
  48              		.loc 1 69 54 view .LVU8
  49 000c 07EE902A 		vmov	s15, r2	@ int
  50 0010 F8EEE77A 		vcvt.f32.s32	s15, s15
  51              		.loc 1 69 70 view .LVU9
  52 0014 D0ED016A 		vldr.32	s13, [r0, #4]
  53              		.loc 1 69 54 view .LVU10
  54 0018 67EEA66A 		vmul.f32	s13, s15, s13
  55              		.loc 1 69 29 view .LVU11
  56 001c 37EE267A 		vadd.f32	s14, s14, s13
  57 0020 80ED047A 		vstr.32	s14, [r0, #16]
  70:Core/Src/supercap.c ****   if(pid_controller->error_sum > pid_controller->I_max)
  58              		.loc 1 70 3 is_stmt 1 view .LVU12
  59              		.loc 1 70 48 is_stmt 0 view .LVU13
  60 0024 B0F91A30 		ldrsh	r3, [r0, #26]
  61              		.loc 1 70 32 view .LVU14
  62 0028 06EE903A 		vmov	s13, r3	@ int
  63 002c F8EEE66A 		vcvt.f32.s32	s13, s13
  64              		.loc 1 70 5 view .LVU15
  65 0030 B4EEE67A 		vcmpe.f32	s14, s13
  66 0034 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  67 0038 23DD     		ble	.L10
  71:Core/Src/supercap.c ****   {pid_controller->error_sum = pid_controller->I_max;}
  68              		.loc 1 71 4 is_stmt 1 view .LVU16
  69              		.loc 1 71 30 is_stmt 0 view .LVU17
  70 003a C0ED046A 		vstr.32	s13, [r0, #16]
  71              	.L4:
  72:Core/Src/supercap.c ****   else if(pid_controller->error_sum < -pid_controller->I_max)
  73:Core/Src/supercap.c ****   {pid_controller->error_sum = -pid_controller->I_max;}
  74:Core/Src/supercap.c ****   pid_controller->output = pid_controller->Kp*pid_controller->error + pid_controller->error_sum + p
  72              		.loc 1 74 3 is_stmt 1 view .LVU18
  73              		.loc 1 74 42 is_stmt 0 view .LVU19
  74 003e 90ED007A 		vldr.32	s14, [r0]
  75              		.loc 1 74 46 view .LVU20
  76 0042 67EE877A 		vmul.f32	s15, s15, s14
  77              		.loc 1 74 85 view .LVU21
  78 0046 90ED047A 		vldr.32	s14, [r0, #16]
  79              		.loc 1 74 69 view .LVU22
  80 004a 77EE877A 		vadd.f32	s15, s15, s14
  81              		.loc 1 74 113 view .LVU23
  82 004e D0ED026A 		vldr.32	s13, [r0, #8]
  83              		.loc 1 74 157 view .LVU24
  84 0052 B0F90E30 		ldrsh	r3, [r0, #14]
  85              		.loc 1 74 141 view .LVU25
  86 0056 D31A     		subs	r3, r2, r3
  87 0058 07EE103A 		vmov	s14, r3	@ int
  88              		.loc 1 74 117 view .LVU26
  89 005c B8EEC77A 		vcvt.f32.s32	s14, s14
  90 0060 27EE267A 		vmul.f32	s14, s14, s13
  91              		.loc 1 74 97 view .LVU27
  92 0064 77EE877A 		vadd.f32	s15, s15, s14
  93              		.loc 1 74 26 view .LVU28
  94 0068 FDEEE77A 		vcvt.s32.f32	s15, s15
  95 006c 17EE903A 		vmov	r3, s15	@ int
  96 0070 1BB2     		sxth	r3, r3
  97 0072 8382     		strh	r3, [r0, #20]	@ movhi
  75:Core/Src/supercap.c ****   pid_controller->error_last = pid_controller->error;
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 4


  98              		.loc 1 75 3 is_stmt 1 view .LVU29
  99              		.loc 1 75 30 is_stmt 0 view .LVU30
 100 0074 C281     		strh	r2, [r0, #14]	@ movhi
  76:Core/Src/supercap.c ****   if(pid_controller->output > pid_controller->output_max)
 101              		.loc 1 76 3 is_stmt 1 view .LVU31
 102              		.loc 1 76 45 is_stmt 0 view .LVU32
 103 0076 B0F91620 		ldrsh	r2, [r0, #22]
 104              		.loc 1 76 5 view .LVU33
 105 007a 9342     		cmp	r3, r2
 106 007c 0EDD     		ble	.L6
  77:Core/Src/supercap.c ****   {pid_controller->output = pid_controller->output_max;}
 107              		.loc 1 77 4 is_stmt 1 view .LVU34
 108              		.loc 1 77 27 is_stmt 0 view .LVU35
 109 007e 8282     		strh	r2, [r0, #20]	@ movhi
 110 0080 7047     		bx	lr
 111              	.L10:
  72:Core/Src/supercap.c ****   {pid_controller->error_sum = -pid_controller->I_max;}
 112              		.loc 1 72 8 is_stmt 1 view .LVU36
  72:Core/Src/supercap.c ****   {pid_controller->error_sum = -pid_controller->I_max;}
 113              		.loc 1 72 39 is_stmt 0 view .LVU37
 114 0082 5B42     		rsbs	r3, r3, #0
  72:Core/Src/supercap.c ****   {pid_controller->error_sum = -pid_controller->I_max;}
 115              		.loc 1 72 37 view .LVU38
 116 0084 06EE903A 		vmov	s13, r3	@ int
 117 0088 F8EEE66A 		vcvt.f32.s32	s13, s13
  72:Core/Src/supercap.c ****   {pid_controller->error_sum = -pid_controller->I_max;}
 118              		.loc 1 72 10 view .LVU39
 119 008c B4EEE67A 		vcmpe.f32	s14, s13
 120 0090 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 121 0094 D3D5     		bpl	.L4
  73:Core/Src/supercap.c ****   pid_controller->output = pid_controller->Kp*pid_controller->error + pid_controller->error_sum + p
 122              		.loc 1 73 4 is_stmt 1 view .LVU40
  73:Core/Src/supercap.c ****   pid_controller->output = pid_controller->Kp*pid_controller->error + pid_controller->error_sum + p
 123              		.loc 1 73 30 is_stmt 0 view .LVU41
 124 0096 C0ED046A 		vstr.32	s13, [r0, #16]
 125 009a D0E7     		b	.L4
 126              	.L6:
  78:Core/Src/supercap.c ****   else if(pid_controller->output < pid_controller->output_min)
 127              		.loc 1 78 8 is_stmt 1 view .LVU42
 128              		.loc 1 78 50 is_stmt 0 view .LVU43
 129 009c B0F91820 		ldrsh	r2, [r0, #24]
 130              		.loc 1 78 10 view .LVU44
 131 00a0 9342     		cmp	r3, r2
 132 00a2 00DA     		bge	.L1
  79:Core/Src/supercap.c ****   {pid_controller->output = pid_controller->output_min;}
 133              		.loc 1 79 4 is_stmt 1 view .LVU45
 134              		.loc 1 79 27 is_stmt 0 view .LVU46
 135 00a4 8282     		strh	r2, [r0, #20]	@ movhi
 136              	.L1:
  80:Core/Src/supercap.c **** }
 137              		.loc 1 80 1 view .LVU47
 138 00a6 7047     		bx	lr
 139              		.cfi_endproc
 140              	.LFE335:
 142              		.section	.text.Supercap_Average_ADC_Function,"ax",%progbits
 143              		.align	1
 144              		.global	Supercap_Average_ADC_Function
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 5


 145              		.syntax unified
 146              		.thumb
 147              		.thumb_func
 149              	Supercap_Average_ADC_Function:
 150              	.LVL2:
 151              	.LFB336:
  81:Core/Src/supercap.c **** 
  82:Core/Src/supercap.c **** //Filter
  83:Core/Src/supercap.c **** //均方根平均滤波
  84:Core/Src/supercap.c **** //明天再写了
  85:Core/Src/supercap.c **** 
  86:Core/Src/supercap.c **** void Supercap_Average_ADC_Function(_ADC_Sample_t *adc_sample) {
 152              		.loc 1 86 63 is_stmt 1 view -0
 153              		.cfi_startproc
 154              		@ args = 0, pretend = 0, frame = 0
 155              		@ frame_needed = 0, uses_anonymous_args = 0
 156              		@ link register save eliminated.
  87:Core/Src/supercap.c ****     if(adc_sample->count == 0){
 157              		.loc 1 87 5 view .LVU49
 158              		.loc 1 87 18 is_stmt 0 view .LVU50
 159 0000 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 160              		.loc 1 87 7 view .LVU51
 161 0002 33B9     		cbnz	r3, .L12
  88:Core/Src/supercap.c ****       adc_sample->average = *(adc_sample->sample);
 162              		.loc 1 88 7 is_stmt 1 view .LVU52
 163              		.loc 1 88 41 is_stmt 0 view .LVU53
 164 0004 0368     		ldr	r3, [r0]
 165              		.loc 1 88 29 view .LVU54
 166 0006 1B88     		ldrh	r3, [r3]
 167              		.loc 1 88 27 view .LVU55
 168 0008 C380     		strh	r3, [r0, #6]	@ movhi
  89:Core/Src/supercap.c ****       adc_sample->history_sum = adc_sample->average << 2;
 169              		.loc 1 89 7 is_stmt 1 view .LVU56
 170              		.loc 1 89 53 is_stmt 0 view .LVU57
 171 000a 9B00     		lsls	r3, r3, #2
 172              		.loc 1 89 31 view .LVU58
 173 000c 8360     		str	r3, [r0, #8]
  90:Core/Src/supercap.c ****       adc_sample->count = 1;
 174              		.loc 1 90 7 is_stmt 1 view .LVU59
 175              		.loc 1 90 25 is_stmt 0 view .LVU60
 176 000e 0123     		movs	r3, #1
 177 0010 0371     		strb	r3, [r0, #4]
 178              	.L12:
  91:Core/Src/supercap.c ****     }
  92:Core/Src/supercap.c ****     adc_sample->history_sum = adc_sample->history_sum - adc_sample->average + *(adc_sample->sample)
 179              		.loc 1 92 5 is_stmt 1 view .LVU61
 180              		.loc 1 92 41 is_stmt 0 view .LVU62
 181 0012 8368     		ldr	r3, [r0, #8]
 182              		.loc 1 92 67 view .LVU63
 183 0014 C288     		ldrh	r2, [r0, #6]
 184              		.loc 1 92 55 view .LVU64
 185 0016 9B1A     		subs	r3, r3, r2
 186              		.loc 1 92 91 view .LVU65
 187 0018 0268     		ldr	r2, [r0]
 188              		.loc 1 92 79 view .LVU66
 189 001a 1288     		ldrh	r2, [r2]
 190              		.loc 1 92 77 view .LVU67
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 6


 191 001c 1344     		add	r3, r3, r2
 192              		.loc 1 92 29 view .LVU68
 193 001e 8360     		str	r3, [r0, #8]
  93:Core/Src/supercap.c ****     adc_sample->average = adc_sample->history_sum >> 2;
 194              		.loc 1 93 5 is_stmt 1 view .LVU69
 195              		.loc 1 93 25 is_stmt 0 view .LVU70
 196 0020 C3F38F03 		ubfx	r3, r3, #2, #16
 197 0024 C380     		strh	r3, [r0, #6]	@ movhi
  94:Core/Src/supercap.c ****     adc_sample->real_value_12bits = (adc_sample->average);
 198              		.loc 1 94 5 is_stmt 1 view .LVU71
 199              		.loc 1 94 35 is_stmt 0 view .LVU72
 200 0026 8381     		strh	r3, [r0, #12]	@ movhi
  95:Core/Src/supercap.c **** }
 201              		.loc 1 95 1 view .LVU73
 202 0028 7047     		bx	lr
 203              		.cfi_endproc
 204              	.LFE336:
 206              		.section	.text.Supercap_First_Order_Filter_ADC_Function,"ax",%progbits
 207              		.align	1
 208              		.global	Supercap_First_Order_Filter_ADC_Function
 209              		.syntax unified
 210              		.thumb
 211              		.thumb_func
 213              	Supercap_First_Order_Filter_ADC_Function:
 214              	.LVL3:
 215              	.LFB337:
  96:Core/Src/supercap.c **** 
  97:Core/Src/supercap.c **** void Supercap_First_Order_Filter_ADC_Function(_ADC_Sample_t *adc_sample) {
 216              		.loc 1 97 74 is_stmt 1 view -0
 217              		.cfi_startproc
 218              		@ args = 0, pretend = 0, frame = 0
 219              		@ frame_needed = 0, uses_anonymous_args = 0
 220              		@ link register save eliminated.
  98:Core/Src/supercap.c **** 			adc_sample->real_value_12bits = (*(adc_sample->sample)>>3) + (adc_sample->real_value_12bits - (a
 221              		.loc 1 98 4 view .LVU75
 222              		.loc 1 98 49 is_stmt 0 view .LVU76
 223 0000 0368     		ldr	r3, [r0]
 224              		.loc 1 98 37 view .LVU77
 225 0002 1A88     		ldrh	r2, [r3]
 226              		.loc 1 98 76 view .LVU78
 227 0004 8389     		ldrh	r3, [r0, #12]
 228              		.loc 1 98 96 view .LVU79
 229 0006 A3EBD303 		sub	r3, r3, r3, lsr #3
 230              		.loc 1 98 63 view .LVU80
 231 000a D208     		lsrs	r2, r2, #3
 232 000c 12FA83F3 		uxtah	r3, r2, r3
 233              		.loc 1 98 34 view .LVU81
 234 0010 8381     		strh	r3, [r0, #12]	@ movhi
  99:Core/Src/supercap.c **** }
 235              		.loc 1 99 1 view .LVU82
 236 0012 7047     		bx	lr
 237              		.cfi_endproc
 238              	.LFE337:
 240              		.section	.text.Supercap_First_Order_Filter_ADC_Function_Alpha,"ax",%progbits
 241              		.align	1
 242              		.global	Supercap_First_Order_Filter_ADC_Function_Alpha
 243              		.syntax unified
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 7


 244              		.thumb
 245              		.thumb_func
 247              	Supercap_First_Order_Filter_ADC_Function_Alpha:
 248              	.LVL4:
 249              	.LFB338:
 100:Core/Src/supercap.c **** 
 101:Core/Src/supercap.c **** void Supercap_First_Order_Filter_ADC_Function_Alpha(_ADC_Sample_t *adc_sample, uint16_t alpha) {
 250              		.loc 1 101 96 is_stmt 1 view -0
 251              		.cfi_startproc
 252              		@ args = 0, pretend = 0, frame = 0
 253              		@ frame_needed = 0, uses_anonymous_args = 0
 254              		@ link register save eliminated.
 102:Core/Src/supercap.c **** 			adc_sample->real_value_12bits = (*(adc_sample->sample)>>alpha) + (adc_sample->real_value_12bits 
 255              		.loc 1 102 4 view .LVU84
 256              		.loc 1 102 49 is_stmt 0 view .LVU85
 257 0000 0368     		ldr	r3, [r0]
 258              		.loc 1 102 37 view .LVU86
 259 0002 1A88     		ldrh	r2, [r3]
 260              		.loc 1 102 58 view .LVU87
 261 0004 0A41     		asrs	r2, r2, r1
 262              		.loc 1 102 80 view .LVU88
 263 0006 8389     		ldrh	r3, [r0, #12]
 264              		.loc 1 102 132 view .LVU89
 265 0008 43FA01F1 		asr	r1, r3, r1
 266              	.LVL5:
 267              		.loc 1 102 100 view .LVU90
 268 000c 5B1A     		subs	r3, r3, r1
 269              		.loc 1 102 67 view .LVU91
 270 000e 12FA83F3 		uxtah	r3, r2, r3
 271              		.loc 1 102 34 view .LVU92
 272 0012 8381     		strh	r3, [r0, #12]	@ movhi
 103:Core/Src/supercap.c **** }
 273              		.loc 1 103 1 view .LVU93
 274 0014 7047     		bx	lr
 275              		.cfi_endproc
 276              	.LFE338:
 278              		.section	.text.TIM2_NVIC,"ax",%progbits
 279              		.align	1
 280              		.global	TIM2_NVIC
 281              		.syntax unified
 282              		.thumb
 283              		.thumb_func
 285              	TIM2_NVIC:
 286              	.LFB333:
  24:Core/Src/supercap.c ****   /*
 287              		.loc 1 24 17 is_stmt 1 view -0
 288              		.cfi_startproc
 289              		@ args = 0, pretend = 0, frame = 0
 290              		@ frame_needed = 0, uses_anonymous_args = 0
 291 0000 08B5     		push	{r3, lr}
 292              	.LCFI0:
 293              		.cfi_def_cfa_offset 8
 294              		.cfi_offset 3, -8
 295              		.cfi_offset 14, -4
  46:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&C_right, 4);
 296              		.loc 1 46 3 view .LVU95
 297 0002 0621     		movs	r1, #6
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 8


 298 0004 0948     		ldr	r0, .L17
 299 0006 FFF7FEFF 		bl	Supercap_First_Order_Filter_ADC_Function_Alpha
 300              	.LVL6:
  47:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&ADC4_12,2);
 301              		.loc 1 47 3 view .LVU96
 302 000a 0421     		movs	r1, #4
 303 000c 0848     		ldr	r0, .L17+4
 304 000e FFF7FEFF 		bl	Supercap_First_Order_Filter_ADC_Function_Alpha
 305              	.LVL7:
  48:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&V_bat, 2);
 306              		.loc 1 48 3 view .LVU97
 307 0012 0221     		movs	r1, #2
 308 0014 0748     		ldr	r0, .L17+8
 309 0016 FFF7FEFF 		bl	Supercap_First_Order_Filter_ADC_Function_Alpha
 310              	.LVL8:
  49:Core/Src/supercap.c ****   Supercap_First_Order_Filter_ADC_Function_Alpha(&V_cap, 2);
 311              		.loc 1 49 3 view .LVU98
 312 001a 0221     		movs	r1, #2
 313 001c 0648     		ldr	r0, .L17+12
 314 001e FFF7FEFF 		bl	Supercap_First_Order_Filter_ADC_Function_Alpha
 315              	.LVL9:
  50:Core/Src/supercap.c **** }
 316              		.loc 1 50 3 view .LVU99
 317 0022 0221     		movs	r1, #2
 318 0024 0548     		ldr	r0, .L17+16
 319 0026 FFF7FEFF 		bl	Supercap_First_Order_Filter_ADC_Function_Alpha
 320              	.LVL10:
  51:Core/Src/supercap.c **** 
 321              		.loc 1 51 1 is_stmt 0 view .LVU100
 322 002a 08BD     		pop	{r3, pc}
 323              	.L18:
 324              		.align	2
 325              	.L17:
 326 002c 00000000 		.word	C_sys
 327 0030 00000000 		.word	C_right
 328 0034 00000000 		.word	ADC4_12
 329 0038 00000000 		.word	V_bat
 330 003c 00000000 		.word	V_cap
 331              		.cfi_endproc
 332              	.LFE333:
 334              		.section	.text.Supercap_ADC_to_Voltage_Funtion,"ax",%progbits
 335              		.align	1
 336              		.global	Supercap_ADC_to_Voltage_Funtion
 337              		.syntax unified
 338              		.thumb
 339              		.thumb_func
 341              	Supercap_ADC_to_Voltage_Funtion:
 342              	.LVL11:
 343              	.LFB339:
 104:Core/Src/supercap.c **** 
 105:Core/Src/supercap.c **** float Supercap_ADC_to_Voltage_Funtion(uint16_t adc_value) {
 344              		.loc 1 105 59 is_stmt 1 view -0
 345              		.cfi_startproc
 346              		@ args = 0, pretend = 0, frame = 0
 347              		@ frame_needed = 0, uses_anonymous_args = 0
 348              		@ link register save eliminated.
 349              		.loc 1 105 59 is_stmt 0 view .LVU102
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 9


 350 0000 07EE900A 		vmov	s15, r0	@ int
 106:Core/Src/supercap.c ****   float voltage = ((float)adc_value * 3.3f / 4095.0f) * 11;
 351              		.loc 1 106 3 is_stmt 1 view .LVU103
 352              		.loc 1 106 20 is_stmt 0 view .LVU104
 353 0004 F8EE677A 		vcvt.f32.u32	s15, s15
 354              		.loc 1 106 37 view .LVU105
 355 0008 9FED067A 		vldr.32	s14, .L20
 356 000c 67EE877A 		vmul.f32	s15, s15, s14
 357              		.loc 1 106 44 view .LVU106
 358 0010 9FED057A 		vldr.32	s14, .L20+4
 359 0014 87EE870A 		vdiv.f32	s0, s15, s14
 360              	.LVL12:
 107:Core/Src/supercap.c ****   return voltage;
 361              		.loc 1 107 3 is_stmt 1 view .LVU107
 108:Core/Src/supercap.c **** }
 362              		.loc 1 108 1 is_stmt 0 view .LVU108
 363 0018 F2EE067A 		vmov.f32	s15, #1.1e+1
 364 001c 20EE270A 		vmul.f32	s0, s0, s15
 365              	.LVL13:
 366              		.loc 1 108 1 view .LVU109
 367 0020 7047     		bx	lr
 368              	.L21:
 369 0022 00BF     		.align	2
 370              	.L20:
 371 0024 33335340 		.word	1079194419
 372 0028 00F07F45 		.word	1166012416
 373              		.cfi_endproc
 374              	.LFE339:
 376              		.section	.text.Supercap_ADC_to_Voltage_Funtion_Ref,"ax",%progbits
 377              		.align	1
 378              		.global	Supercap_ADC_to_Voltage_Funtion_Ref
 379              		.syntax unified
 380              		.thumb
 381              		.thumb_func
 383              	Supercap_ADC_to_Voltage_Funtion_Ref:
 384              	.LVL14:
 385              	.LFB340:
 109:Core/Src/supercap.c **** 
 110:Core/Src/supercap.c **** float Supercap_ADC_to_Voltage_Funtion_Ref(uint16_t adc_value) {
 386              		.loc 1 110 63 is_stmt 1 view -0
 387              		.cfi_startproc
 388              		@ args = 0, pretend = 0, frame = 0
 389              		@ frame_needed = 0, uses_anonymous_args = 0
 390              		@ link register save eliminated.
 391              		.loc 1 110 63 is_stmt 0 view .LVU111
 392 0000 07EE900A 		vmov	s15, r0	@ int
 111:Core/Src/supercap.c ****   float voltage = ((float)adc_value * 3.3f / 4095.0f);
 393              		.loc 1 111 3 is_stmt 1 view .LVU112
 394              		.loc 1 111 20 is_stmt 0 view .LVU113
 395 0004 F8EE677A 		vcvt.f32.u32	s15, s15
 396              		.loc 1 111 37 view .LVU114
 397 0008 9FED047A 		vldr.32	s14, .L23
 398 000c 67EE877A 		vmul.f32	s15, s15, s14
 399              	.LVL15:
 112:Core/Src/supercap.c ****   return voltage;
 400              		.loc 1 112 3 is_stmt 1 view .LVU115
 113:Core/Src/supercap.c **** }
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 10


 401              		.loc 1 113 1 is_stmt 0 view .LVU116
 402 0010 9FED030A 		vldr.32	s0, .L23+4
 403 0014 87EE800A 		vdiv.f32	s0, s15, s0
 404              	.LVL16:
 405              		.loc 1 113 1 view .LVU117
 406 0018 7047     		bx	lr
 407              	.L24:
 408 001a 00BF     		.align	2
 409              	.L23:
 410 001c 33335340 		.word	1079194419
 411 0020 00F07F45 		.word	1166012416
 412              		.cfi_endproc
 413              	.LFE340:
 415              		.section	.text.Supercap_ADC_to_Current_Funtion,"ax",%progbits
 416              		.align	1
 417              		.global	Supercap_ADC_to_Current_Funtion
 418              		.syntax unified
 419              		.thumb
 420              		.thumb_func
 422              	Supercap_ADC_to_Current_Funtion:
 423              	.LVL17:
 424              	.LFB341:
 114:Core/Src/supercap.c **** 
 115:Core/Src/supercap.c **** float Supercap_ADC_to_Current_Funtion(uint16_t adc_value, uint16_t ref_voltage) {
 425              		.loc 1 115 81 is_stmt 1 view -0
 426              		.cfi_startproc
 427              		@ args = 0, pretend = 0, frame = 0
 428              		@ frame_needed = 0, uses_anonymous_args = 0
 429              		@ link register save eliminated.
 116:Core/Src/supercap.c ****   // ((ref_12bits*3.3/4095)+(current_flot*0.005)*25)*4095/3.3=current_12bits
 117:Core/Src/supercap.c ****   float current = 0.00644689f * (float)(adc_value - ref_voltage);
 430              		.loc 1 117 3 view .LVU119
 431              		.loc 1 117 51 is_stmt 0 view .LVU120
 432 0000 401A     		subs	r0, r0, r1
 433              	.LVL18:
 434              		.loc 1 117 33 view .LVU121
 435 0002 07EE900A 		vmov	s15, r0	@ int
 436 0006 B8EEE70A 		vcvt.f32.s32	s0, s15
 437              	.LVL19:
 118:Core/Src/supercap.c ****   return current;
 438              		.loc 1 118 3 is_stmt 1 view .LVU122
 119:Core/Src/supercap.c **** }
 439              		.loc 1 119 1 is_stmt 0 view .LVU123
 440 000a DFED027A 		vldr.32	s15, .L26
 441 000e 20EE270A 		vmul.f32	s0, s0, s15
 442              	.LVL20:
 443              		.loc 1 119 1 view .LVU124
 444 0012 7047     		bx	lr
 445              	.L27:
 446              		.align	2
 447              	.L26:
 448 0014 6F40D33B 		.word	1003700335
 449              		.cfi_endproc
 450              	.LFE341:
 452              		.section	.text.Supercap_PID_Init,"ax",%progbits
 453              		.align	1
 454              		.global	Supercap_PID_Init
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 11


 455              		.syntax unified
 456              		.thumb
 457              		.thumb_func
 459              	Supercap_PID_Init:
 460              	.LVL21:
 461              	.LFB342:
 120:Core/Src/supercap.c **** 
 121:Core/Src/supercap.c **** //Init
 122:Core/Src/supercap.c **** void Supercap_PID_Init(_Supercap_PID_Controller_t *pid_controller, float Kp, float Ki, float Kd, in
 462              		.loc 1 122 153 is_stmt 1 view -0
 463              		.cfi_startproc
 464              		@ args = 0, pretend = 0, frame = 0
 465              		@ frame_needed = 0, uses_anonymous_args = 0
 466              		@ link register save eliminated.
 123:Core/Src/supercap.c ****   pid_controller->Kp = Kp;
 467              		.loc 1 123 3 view .LVU126
 468              		.loc 1 123 22 is_stmt 0 view .LVU127
 469 0000 80ED000A 		vstr.32	s0, [r0]
 124:Core/Src/supercap.c ****   pid_controller->Ki = Ki;
 470              		.loc 1 124 3 is_stmt 1 view .LVU128
 471              		.loc 1 124 22 is_stmt 0 view .LVU129
 472 0004 C0ED010A 		vstr.32	s1, [r0, #4]
 125:Core/Src/supercap.c ****   pid_controller->Kd = Kd;
 473              		.loc 1 125 3 is_stmt 1 view .LVU130
 474              		.loc 1 125 22 is_stmt 0 view .LVU131
 475 0008 80ED021A 		vstr.32	s2, [r0, #8]
 126:Core/Src/supercap.c ****   pid_controller->output_max = output_max;
 476              		.loc 1 126 3 is_stmt 1 view .LVU132
 477              		.loc 1 126 30 is_stmt 0 view .LVU133
 478 000c C182     		strh	r1, [r0, #22]	@ movhi
 127:Core/Src/supercap.c ****   pid_controller->output_min = output_min;
 479              		.loc 1 127 3 is_stmt 1 view .LVU134
 480              		.loc 1 127 30 is_stmt 0 view .LVU135
 481 000e 0283     		strh	r2, [r0, #24]	@ movhi
 128:Core/Src/supercap.c ****   pid_controller->I_max = I_max;
 482              		.loc 1 128 3 is_stmt 1 view .LVU136
 483              		.loc 1 128 25 is_stmt 0 view .LVU137
 484 0010 4383     		strh	r3, [r0, #26]	@ movhi
 129:Core/Src/supercap.c **** }
 485              		.loc 1 129 1 view .LVU138
 486 0012 7047     		bx	lr
 487              		.cfi_endproc
 488              	.LFE342:
 490              		.section	.text.Supercap_PWM_left,"ax",%progbits
 491              		.align	1
 492              		.global	Supercap_PWM_left
 493              		.syntax unified
 494              		.thumb
 495              		.thumb_func
 497              	Supercap_PWM_left:
 498              	.LVL22:
 499              	.LFB343:
 130:Core/Src/supercap.c **** 
 131:Core/Src/supercap.c **** //Driver
 132:Core/Src/supercap.c **** void Supercap_PWM_left(uint16_t pwm_duty_cycle) {
 500              		.loc 1 132 49 is_stmt 1 view -0
 501              		.cfi_startproc
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 12


 502              		@ args = 0, pretend = 0, frame = 0
 503              		@ frame_needed = 0, uses_anonymous_args = 0
 504              		@ link register save eliminated.
 133:Core/Src/supercap.c ****   __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, pwm_duty_cycle);
 505              		.loc 1 133 3 view .LVU140
 506 0000 024B     		ldr	r3, .L30
 507 0002 1B68     		ldr	r3, [r3]
 508 0004 5863     		str	r0, [r3, #52]
 134:Core/Src/supercap.c ****   __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_4, 1);
 509              		.loc 1 134 3 view .LVU141
 510 0006 0122     		movs	r2, #1
 511 0008 1A64     		str	r2, [r3, #64]
 135:Core/Src/supercap.c **** };
 512              		.loc 1 135 1 is_stmt 0 view .LVU142
 513 000a 7047     		bx	lr
 514              	.L31:
 515              		.align	2
 516              	.L30:
 517 000c 00000000 		.word	htim1
 518              		.cfi_endproc
 519              	.LFE343:
 521              		.section	.text.TIM5_NVIC,"ax",%progbits
 522              		.align	1
 523              		.global	TIM5_NVIC
 524              		.syntax unified
 525              		.thumb
 526              		.thumb_func
 528              	TIM5_NVIC:
 529              	.LFB334:
  53:Core/Src/supercap.c ****   /*
 530              		.loc 1 53 17 is_stmt 1 view -0
 531              		.cfi_startproc
 532              		@ args = 0, pretend = 0, frame = 0
 533              		@ frame_needed = 0, uses_anonymous_args = 0
 534 0000 10B5     		push	{r4, lr}
 535              	.LCFI1:
 536              		.cfi_def_cfa_offset 8
 537              		.cfi_offset 4, -8
 538              		.cfi_offset 14, -4
  62:Core/Src/supercap.c ****   In_loop_PID.output = 300 * (Out_loop_PID.output / V_bat.real_value_12bits);
 539              		.loc 1 62 3 view .LVU144
 540 0002 0C4C     		ldr	r4, .L34
 541 0004 40F69802 		movw	r2, #2200
 542 0008 0B49     		ldr	r1, .L34+4
 543 000a 2046     		mov	r0, r4
 544 000c FFF7FEFF 		bl	Supercap_PID_Controller_Function
 545              	.LVL23:
  63:Core/Src/supercap.c ****   Supercap_PWM_left(In_loop_PID.output);
 546              		.loc 1 63 3 view .LVU145
  63:Core/Src/supercap.c ****   Supercap_PWM_left(In_loop_PID.output);
 547              		.loc 1 63 43 is_stmt 0 view .LVU146
 548 0010 B4F91430 		ldrsh	r3, [r4, #20]
  63:Core/Src/supercap.c ****   Supercap_PWM_left(In_loop_PID.output);
 549              		.loc 1 63 58 view .LVU147
 550 0014 094A     		ldr	r2, .L34+8
 551 0016 9289     		ldrh	r2, [r2, #12]
  63:Core/Src/supercap.c ****   Supercap_PWM_left(In_loop_PID.output);
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 13


 552              		.loc 1 63 51 view .LVU148
 553 0018 93FBF2F3 		sdiv	r3, r3, r2
  63:Core/Src/supercap.c ****   Supercap_PWM_left(In_loop_PID.output);
 554              		.loc 1 63 22 view .LVU149
 555 001c 03EB8303 		add	r3, r3, r3, lsl #2
 556 0020 C3EB0313 		rsb	r3, r3, r3, lsl #4
 557 0024 9800     		lsls	r0, r3, #2
 558 0026 80B2     		uxth	r0, r0
 559 0028 054B     		ldr	r3, .L34+12
 560 002a 9882     		strh	r0, [r3, #20]	@ movhi
  64:Core/Src/supercap.c **** }
 561              		.loc 1 64 3 is_stmt 1 view .LVU150
 562 002c FFF7FEFF 		bl	Supercap_PWM_left
 563              	.LVL24:
  65:Core/Src/supercap.c **** 
 564              		.loc 1 65 1 is_stmt 0 view .LVU151
 565 0030 10BD     		pop	{r4, pc}
 566              	.L35:
 567 0032 00BF     		.align	2
 568              	.L34:
 569 0034 00000000 		.word	Out_loop_PID
 570 0038 00000000 		.word	C_right
 571 003c 00000000 		.word	V_bat
 572 0040 00000000 		.word	In_loop_PID
 573              		.cfi_endproc
 574              	.LFE334:
 576              		.section	.text.HAL_TIM_PeriodElapsedCallback,"ax",%progbits
 577              		.align	1
 578              		.global	HAL_TIM_PeriodElapsedCallback
 579              		.syntax unified
 580              		.thumb
 581              		.thumb_func
 583              	HAL_TIM_PeriodElapsedCallback:
 584              	.LVL25:
 585              	.LFB332:
  11:Core/Src/supercap.c **** 	if(htim->Instance == TIM5){
 586              		.loc 1 11 61 is_stmt 1 view -0
 587              		.cfi_startproc
 588              		@ args = 0, pretend = 0, frame = 0
 589              		@ frame_needed = 0, uses_anonymous_args = 0
  11:Core/Src/supercap.c **** 	if(htim->Instance == TIM5){
 590              		.loc 1 11 61 is_stmt 0 view .LVU153
 591 0000 10B5     		push	{r4, lr}
 592              	.LCFI2:
 593              		.cfi_def_cfa_offset 8
 594              		.cfi_offset 4, -8
 595              		.cfi_offset 14, -4
  12:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
 596              		.loc 1 12 2 is_stmt 1 view .LVU154
  12:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
 597              		.loc 1 12 9 is_stmt 0 view .LVU155
 598 0002 0368     		ldr	r3, [r0]
  12:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
 599              		.loc 1 12 4 view .LVU156
 600 0004 134A     		ldr	r2, .L42
 601 0006 9342     		cmp	r3, r2
 602 0008 03D0     		beq	.L40
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 14


  17:Core/Src/supercap.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
 603              		.loc 1 17 8 is_stmt 1 view .LVU157
  17:Core/Src/supercap.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
 604              		.loc 1 17 10 is_stmt 0 view .LVU158
 605 000a B3F1804F 		cmp	r3, #1073741824
 606 000e 10D0     		beq	.L41
 607              	.LVL26:
 608              	.L36:
  22:Core/Src/supercap.c **** 
 609              		.loc 1 22 1 view .LVU159
 610 0010 10BD     		pop	{r4, pc}
 611              	.LVL27:
 612              	.L40:
  13:Core/Src/supercap.c ****     TIM5_NVIC();
 613              		.loc 1 13 3 is_stmt 1 view .LVU160
 614 0012 114C     		ldr	r4, .L42+4
 615 0014 0122     		movs	r2, #1
 616 0016 4FF40041 		mov	r1, #32768
 617 001a 2046     		mov	r0, r4
 618              	.LVL28:
  13:Core/Src/supercap.c ****     TIM5_NVIC();
 619              		.loc 1 13 3 is_stmt 0 view .LVU161
 620 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
 621              	.LVL29:
  14:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_RESET);
 622              		.loc 1 14 5 is_stmt 1 view .LVU162
 623 0020 FFF7FEFF 		bl	TIM5_NVIC
 624              	.LVL30:
  15:Core/Src/supercap.c **** 	}
 625              		.loc 1 15 3 view .LVU163
 626 0024 0022     		movs	r2, #0
 627 0026 4FF40041 		mov	r1, #32768
 628 002a 2046     		mov	r0, r4
 629 002c FFF7FEFF 		bl	HAL_GPIO_WritePin
 630              	.LVL31:
 631 0030 EEE7     		b	.L36
 632              	.LVL32:
 633              	.L41:
  18:Core/Src/supercap.c ****     TIM2_NVIC();
 634              		.loc 1 18 5 view .LVU164
 635 0032 094C     		ldr	r4, .L42+4
 636 0034 0122     		movs	r2, #1
 637 0036 4FF40041 		mov	r1, #32768
 638 003a 2046     		mov	r0, r4
 639              	.LVL33:
  18:Core/Src/supercap.c ****     TIM2_NVIC();
 640              		.loc 1 18 5 is_stmt 0 view .LVU165
 641 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 642              	.LVL34:
  19:Core/Src/supercap.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_RESET);
 643              		.loc 1 19 5 is_stmt 1 view .LVU166
 644 0040 FFF7FEFF 		bl	TIM2_NVIC
 645              	.LVL35:
  20:Core/Src/supercap.c ****   }
 646              		.loc 1 20 5 view .LVU167
 647 0044 0022     		movs	r2, #0
 648 0046 4FF40041 		mov	r1, #32768
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 15


 649 004a 2046     		mov	r0, r4
 650 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 651              	.LVL36:
  22:Core/Src/supercap.c **** 
 652              		.loc 1 22 1 is_stmt 0 view .LVU168
 653 0050 DEE7     		b	.L36
 654              	.L43:
 655 0052 00BF     		.align	2
 656              	.L42:
 657 0054 000C0040 		.word	1073744896
 658 0058 00040048 		.word	1207960576
 659              		.cfi_endproc
 660              	.LFE332:
 662              		.section	.text.Supercap_PWM_right,"ax",%progbits
 663              		.align	1
 664              		.global	Supercap_PWM_right
 665              		.syntax unified
 666              		.thumb
 667              		.thumb_func
 669              	Supercap_PWM_right:
 670              	.LVL37:
 671              	.LFB344:
 136:Core/Src/supercap.c **** 
 137:Core/Src/supercap.c **** void Supercap_PWM_right(uint16_t pwm_duty_cycle) {
 672              		.loc 1 137 50 is_stmt 1 view -0
 673              		.cfi_startproc
 674              		@ args = 0, pretend = 0, frame = 0
 675              		@ frame_needed = 0, uses_anonymous_args = 0
 676              		@ link register save eliminated.
 138:Core/Src/supercap.c ****   __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, 299);
 677              		.loc 1 138 3 view .LVU170
 678 0000 034B     		ldr	r3, .L45
 679 0002 1B68     		ldr	r3, [r3]
 680 0004 40F22B12 		movw	r2, #299
 681 0008 5A63     		str	r2, [r3, #52]
 139:Core/Src/supercap.c ****   __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_4, pwm_duty_cycle);
 682              		.loc 1 139 3 view .LVU171
 683 000a 1864     		str	r0, [r3, #64]
 140:Core/Src/supercap.c **** };...
 684              		.loc 1 140 1 is_stmt 0 view .LVU172
 685 000c 7047     		bx	lr
 686              	.L46:
 687 000e 00BF     		.align	2
 688              	.L45:
 689 0010 00000000 		.word	htim1
 690              		.cfi_endproc
 691              	.LFE344:
 693              		.text
 694              	.Letext0:
 695              		.file 2 "C:/Program Files (x86)/Arm GNU Toolchain arm-none-eabi/13.2 Rel1/arm-none-eabi/include/ma
 696              		.file 3 "C:/Program Files (x86)/Arm GNU Toolchain arm-none-eabi/13.2 Rel1/arm-none-eabi/include/sy
 697              		.file 4 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g473xx.h"
 698              		.file 5 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 699              		.file 6 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_gpio.h"
 700              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 701              		.file 8 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 702              		.file 9 "Core/Inc/supercap.h"
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 16


 703              		.file 10 "Core/Inc/tim.h"
ARM GAS  C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s 			page 17


DEFINED SYMBOLS
                            *ABS*:00000000 supercap.c
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:21     .text.Supercap_PID_Controller_Function:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:27     .text.Supercap_PID_Controller_Function:00000000 Supercap_PID_Controller_Function
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:143    .text.Supercap_Average_ADC_Function:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:149    .text.Supercap_Average_ADC_Function:00000000 Supercap_Average_ADC_Function
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:207    .text.Supercap_First_Order_Filter_ADC_Function:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:213    .text.Supercap_First_Order_Filter_ADC_Function:00000000 Supercap_First_Order_Filter_ADC_Function
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:241    .text.Supercap_First_Order_Filter_ADC_Function_Alpha:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:247    .text.Supercap_First_Order_Filter_ADC_Function_Alpha:00000000 Supercap_First_Order_Filter_ADC_Function_Alpha
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:279    .text.TIM2_NVIC:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:285    .text.TIM2_NVIC:00000000 TIM2_NVIC
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:326    .text.TIM2_NVIC:0000002c $d
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:335    .text.Supercap_ADC_to_Voltage_Funtion:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:341    .text.Supercap_ADC_to_Voltage_Funtion:00000000 Supercap_ADC_to_Voltage_Funtion
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:371    .text.Supercap_ADC_to_Voltage_Funtion:00000024 $d
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:377    .text.Supercap_ADC_to_Voltage_Funtion_Ref:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:383    .text.Supercap_ADC_to_Voltage_Funtion_Ref:00000000 Supercap_ADC_to_Voltage_Funtion_Ref
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:410    .text.Supercap_ADC_to_Voltage_Funtion_Ref:0000001c $d
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:416    .text.Supercap_ADC_to_Current_Funtion:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:422    .text.Supercap_ADC_to_Current_Funtion:00000000 Supercap_ADC_to_Current_Funtion
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:448    .text.Supercap_ADC_to_Current_Funtion:00000014 $d
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:453    .text.Supercap_PID_Init:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:459    .text.Supercap_PID_Init:00000000 Supercap_PID_Init
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:491    .text.Supercap_PWM_left:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:497    .text.Supercap_PWM_left:00000000 Supercap_PWM_left
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:517    .text.Supercap_PWM_left:0000000c $d
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:522    .text.TIM5_NVIC:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:528    .text.TIM5_NVIC:00000000 TIM5_NVIC
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:569    .text.TIM5_NVIC:00000034 $d
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:577    .text.HAL_TIM_PeriodElapsedCallback:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:583    .text.HAL_TIM_PeriodElapsedCallback:00000000 HAL_TIM_PeriodElapsedCallback
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:657    .text.HAL_TIM_PeriodElapsedCallback:00000054 $d
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:663    .text.Supercap_PWM_right:00000000 $t
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:669    .text.Supercap_PWM_right:00000000 Supercap_PWM_right
C:\Users\purdu\AppData\Local\Temp\ccfDavMZ.s:689    .text.Supercap_PWM_right:00000010 $d

UNDEFINED SYMBOLS
C_sys
C_right
ADC4_12
V_bat
V_cap
htim1
Out_loop_PID
In_loop_PID
HAL_GPIO_WritePin
