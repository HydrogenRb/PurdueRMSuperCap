ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"supercap.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/supercap.c"
  20              		.section	.text.ADC_to_Voltage_Funtion,"ax",%progbits
  21              		.align	1
  22              		.global	ADC_to_Voltage_Funtion
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	ADC_to_Voltage_Funtion:
  28              	.LVL0:
  29              	.LFB329:
   1:Core/Src/supercap.c **** /**
   2:Core/Src/supercap.c ****   ******************************************************************************
   3:Core/Src/supercap.c ****   * @file    supercap.c
   4:Core/Src/supercap.c ****   * @brief   This file provides code for the configuration
   5:Core/Src/supercap.c ****   *          of all used supercap pins.
   6:Core/Src/supercap.c ****   */
   7:Core/Src/supercap.c **** /* USER CODE END Header */
   8:Core/Src/supercap.c **** #include "supercap.h"
   9:Core/Src/supercap.c **** 
  10:Core/Src/supercap.c **** 
  11:Core/Src/supercap.c **** 
  12:Core/Src/supercap.c **** float ADC_to_Voltage_Funtion(uint16_t adc_value) {
  30              		.loc 1 12 50 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  35              		.loc 1 12 50 is_stmt 0 view .LVU1
  36 0000 07EE900A 		vmov	s15, r0	@ int
  13:Core/Src/supercap.c ****   float voltage = (float)adc_value * 3.3f / 4095.0f;
  37              		.loc 1 13 3 is_stmt 1 view .LVU2
  38              		.loc 1 13 19 is_stmt 0 view .LVU3
  39 0004 F8EE677A 		vcvt.f32.u32	s15, s15
  40              		.loc 1 13 36 view .LVU4
  41 0008 9FED047A 		vldr.32	s14, .L2
  42 000c 67EE877A 		vmul.f32	s15, s15, s14
  43              	.LVL1:
  14:Core/Src/supercap.c ****   return voltage;
  44              		.loc 1 14 3 is_stmt 1 view .LVU5
ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 2


  15:Core/Src/supercap.c **** }
  45              		.loc 1 15 1 is_stmt 0 view .LVU6
  46 0010 9FED030A 		vldr.32	s0, .L2+4
  47 0014 87EE800A 		vdiv.f32	s0, s15, s0
  48              	.LVL2:
  49              		.loc 1 15 1 view .LVU7
  50 0018 7047     		bx	lr
  51              	.L3:
  52 001a 00BF     		.align	2
  53              	.L2:
  54 001c 33335340 		.word	1079194419
  55 0020 00F07F45 		.word	1166012416
  56              		.cfi_endproc
  57              	.LFE329:
  59              		.section	.text.Supercap_Average_ADC_Function,"ax",%progbits
  60              		.align	1
  61              		.global	Supercap_Average_ADC_Function
  62              		.syntax unified
  63              		.thumb
  64              		.thumb_func
  66              	Supercap_Average_ADC_Function:
  67              	.LVL3:
  68              	.LFB330:
  16:Core/Src/supercap.c **** 
  17:Core/Src/supercap.c **** void Supercap_Average_ADC_Function(_ADC_Sample_t *adc_sample) {
  69              		.loc 1 17 63 is_stmt 1 view -0
  70              		.cfi_startproc
  71              		@ args = 0, pretend = 0, frame = 0
  72              		@ frame_needed = 0, uses_anonymous_args = 0
  73              		@ link register save eliminated.
  18:Core/Src/supercap.c **** 			adc_sample->real_value_12bits = (*(adc_sample->sample)>>2) + (adc_sample->real_value_12bits - (a
  74              		.loc 1 18 4 view .LVU9
  75              		.loc 1 18 49 is_stmt 0 view .LVU10
  76 0000 0368     		ldr	r3, [r0]
  77              		.loc 1 18 37 view .LVU11
  78 0002 1A88     		ldrh	r2, [r3]
  79              		.loc 1 18 76 view .LVU12
  80 0004 8388     		ldrh	r3, [r0, #4]
  81              		.loc 1 18 96 view .LVU13
  82 0006 A3EB9303 		sub	r3, r3, r3, lsr #2
  83              		.loc 1 18 63 view .LVU14
  84 000a 9208     		lsrs	r2, r2, #2
  85 000c 12FA83F3 		uxtah	r3, r2, r3
  86              		.loc 1 18 34 view .LVU15
  87 0010 8380     		strh	r3, [r0, #4]	@ movhi
  19:Core/Src/supercap.c **** }
  88              		.loc 1 19 1 view .LVU16
  89 0012 7047     		bx	lr
  90              		.cfi_endproc
  91              	.LFE330:
  93              		.section	.text.Supercap_PID_Controller_Function,"ax",%progbits
  94              		.align	1
  95              		.global	Supercap_PID_Controller_Function
  96              		.syntax unified
  97              		.thumb
  98              		.thumb_func
 100              	Supercap_PID_Controller_Function:
ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 3


 101              	.LVL4:
 102              	.LFB331:
  20:Core/Src/supercap.c **** 
  21:Core/Src/supercap.c **** void Supercap_PID_Controller_Function(_Supercap_PID_Controller_t *pid_controller, _ADC_Sample_t *ad
 103              		.loc 1 21 124 is_stmt 1 view -0
 104              		.cfi_startproc
 105              		@ args = 0, pretend = 0, frame = 0
 106              		@ frame_needed = 0, uses_anonymous_args = 0
 107              		@ link register save eliminated.
  22:Core/Src/supercap.c ****   pid_controller->error = target - adc_sample->real_value_12bits;
 108              		.loc 1 22 3 view .LVU18
 109              		.loc 1 22 46 is_stmt 0 view .LVU19
 110 0000 8B88     		ldrh	r3, [r1, #4]
 111 0002 07EE903A 		vmov	s15, r3	@ int
 112              		.loc 1 22 34 view .LVU20
 113 0006 F8EEE77A 		vcvt.f32.s32	s15, s15
 114 000a 30EE670A 		vsub.f32	s0, s0, s15
 115              	.LVL5:
 116              		.loc 1 22 25 view .LVU21
 117 000e BCEEC00A 		vcvt.u32.f32	s0, s0
 118 0012 10EE103A 		vmov	r3, s0	@ int
 119 0016 9BB2     		uxth	r3, r3
 120 0018 C380     		strh	r3, [r0, #6]	@ movhi
  23:Core/Src/supercap.c ****   pid_controller->error_sum += pid_controller->error;
 121              		.loc 1 23 3 is_stmt 1 view .LVU22
 122              		.loc 1 23 17 is_stmt 0 view .LVU23
 123 001a 4189     		ldrh	r1, [r0, #10]
 124              	.LVL6:
 125              		.loc 1 23 29 view .LVU24
 126 001c 1944     		add	r1, r1, r3
 127 001e 89B2     		uxth	r1, r1
 128 0020 4181     		strh	r1, [r0, #10]	@ movhi
  24:Core/Src/supercap.c ****   pid_controller->output = pid_controller->Kp * pid_controller->error + pid_controller->Ki * pid_co
 129              		.loc 1 24 3 is_stmt 1 view .LVU25
 130              		.loc 1 24 42 is_stmt 0 view .LVU26
 131 0022 0288     		ldrh	r2, [r0]
 132              		.loc 1 24 47 view .LVU27
 133 0024 13FB02F2 		smulbb	r2, r3, r2
 134              		.loc 1 24 87 view .LVU28
 135 0028 B0F802C0 		ldrh	ip, [r0, #2]
 136              		.loc 1 24 92 view .LVU29
 137 002c 11FB0CF1 		smulbb	r1, r1, ip
 138 0030 89B2     		uxth	r1, r1
 139              		.loc 1 24 71 view .LVU30
 140 0032 11FA82F2 		uxtah	r2, r1, r2
 141              		.loc 1 24 136 view .LVU31
 142 0036 B0F804C0 		ldrh	ip, [r0, #4]
 143              		.loc 1 24 182 view .LVU32
 144 003a 0189     		ldrh	r1, [r0, #8]
 145              		.loc 1 24 120 view .LVU33
 146 003c 591A     		subs	r1, r3, r1
 147 003e 11FB0CF1 		smulbb	r1, r1, ip
 148 0042 11FA82F2 		uxtah	r2, r1, r2
 149 0046 92B2     		uxth	r2, r2
 150              		.loc 1 24 26 view .LVU34
 151 0048 8281     		strh	r2, [r0, #12]	@ movhi
  25:Core/Src/supercap.c ****   pid_controller->error_last = pid_controller->error;
ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 4


 152              		.loc 1 25 3 is_stmt 1 view .LVU35
 153              		.loc 1 25 30 is_stmt 0 view .LVU36
 154 004a 0381     		strh	r3, [r0, #8]	@ movhi
  26:Core/Src/supercap.c ****   if(pid_controller->output > pid_controller->output_max) {
 155              		.loc 1 26 3 is_stmt 1 view .LVU37
 156              		.loc 1 26 45 is_stmt 0 view .LVU38
 157 004c C389     		ldrh	r3, [r0, #14]
 158              		.loc 1 26 5 view .LVU39
 159 004e 9A42     		cmp	r2, r3
 160 0050 00D9     		bls	.L6
  27:Core/Src/supercap.c ****     pid_controller->output = pid_controller->output_max;
 161              		.loc 1 27 5 is_stmt 1 view .LVU40
 162              		.loc 1 27 28 is_stmt 0 view .LVU41
 163 0052 8381     		strh	r3, [r0, #12]	@ movhi
 164              	.L6:
  28:Core/Src/supercap.c ****   }
  29:Core/Src/supercap.c ****   if(pid_controller->output < pid_controller->output_min) {
 165              		.loc 1 29 3 is_stmt 1 view .LVU42
 166              		.loc 1 29 20 is_stmt 0 view .LVU43
 167 0054 8289     		ldrh	r2, [r0, #12]
 168              		.loc 1 29 45 view .LVU44
 169 0056 038A     		ldrh	r3, [r0, #16]
 170              		.loc 1 29 5 view .LVU45
 171 0058 9A42     		cmp	r2, r3
 172 005a 00D2     		bcs	.L5
  30:Core/Src/supercap.c ****     pid_controller->output = pid_controller->output_min;
 173              		.loc 1 30 5 is_stmt 1 view .LVU46
 174              		.loc 1 30 28 is_stmt 0 view .LVU47
 175 005c 8381     		strh	r3, [r0, #12]	@ movhi
 176              	.L5:
  31:Core/Src/supercap.c ****   }
  32:Core/Src/supercap.c **** }
 177              		.loc 1 32 1 view .LVU48
 178 005e 7047     		bx	lr
 179              		.cfi_endproc
 180              	.LFE331:
 182              		.section	.text.Supercap_PID_Init,"ax",%progbits
 183              		.align	1
 184              		.global	Supercap_PID_Init
 185              		.syntax unified
 186              		.thumb
 187              		.thumb_func
 189              	Supercap_PID_Init:
 190              	.LVL7:
 191              	.LFB332:
  33:Core/Src/supercap.c **** 
  34:Core/Src/supercap.c **** void Supercap_PID_Init(_Supercap_PID_Controller_t *pid_controller, uint16_t Kp, uint16_t Ki, uint16
 192              		.loc 1 34 149 is_stmt 1 view -0
 193              		.cfi_startproc
 194              		@ args = 8, pretend = 0, frame = 0
 195              		@ frame_needed = 0, uses_anonymous_args = 0
 196              		@ link register save eliminated.
  35:Core/Src/supercap.c ****   pid_controller->Kp = Kp;
 197              		.loc 1 35 3 view .LVU50
 198              		.loc 1 35 22 is_stmt 0 view .LVU51
 199 0000 0180     		strh	r1, [r0]	@ movhi
  36:Core/Src/supercap.c ****   pid_controller->Ki = Ki;
ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 5


 200              		.loc 1 36 3 is_stmt 1 view .LVU52
 201              		.loc 1 36 22 is_stmt 0 view .LVU53
 202 0002 4280     		strh	r2, [r0, #2]	@ movhi
  37:Core/Src/supercap.c ****   pid_controller->Kd = Kd;
 203              		.loc 1 37 3 is_stmt 1 view .LVU54
 204              		.loc 1 37 22 is_stmt 0 view .LVU55
 205 0004 8380     		strh	r3, [r0, #4]	@ movhi
  38:Core/Src/supercap.c ****   pid_controller->output_max = output_max;
 206              		.loc 1 38 3 is_stmt 1 view .LVU56
 207              		.loc 1 38 30 is_stmt 0 view .LVU57
 208 0006 BDF80030 		ldrh	r3, [sp]
 209              	.LVL8:
 210              		.loc 1 38 30 view .LVU58
 211 000a C381     		strh	r3, [r0, #14]	@ movhi
  39:Core/Src/supercap.c ****   pid_controller->output_min = output_min;
 212              		.loc 1 39 3 is_stmt 1 view .LVU59
 213              		.loc 1 39 30 is_stmt 0 view .LVU60
 214 000c BDF80430 		ldrh	r3, [sp, #4]
 215 0010 0382     		strh	r3, [r0, #16]	@ movhi
  40:Core/Src/supercap.c **** }
 216              		.loc 1 40 1 view .LVU61
 217 0012 7047     		bx	lr
 218              		.cfi_endproc
 219              	.LFE332:
 221              		.section	.text.Supercap_PWM_left,"ax",%progbits
 222              		.align	1
 223              		.global	Supercap_PWM_left
 224              		.syntax unified
 225              		.thumb
 226              		.thumb_func
 228              	Supercap_PWM_left:
 229              	.LVL9:
 230              	.LFB333:
  41:Core/Src/supercap.c **** 
  42:Core/Src/supercap.c **** void Supercap_PWM_left(uint32_t pwm_duty_cycle) {
 231              		.loc 1 42 49 is_stmt 1 view -0
 232              		.cfi_startproc
 233              		@ args = 0, pretend = 0, frame = 0
 234              		@ frame_needed = 0, uses_anonymous_args = 0
 235              		@ link register save eliminated.
  43:Core/Src/supercap.c ****   __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, pwm_duty_cycle);
 236              		.loc 1 43 3 view .LVU63
 237 0000 024B     		ldr	r3, .L10
 238 0002 1B68     		ldr	r3, [r3]
 239 0004 5863     		str	r0, [r3, #52]
  44:Core/Src/supercap.c ****   __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_4, 0);
 240              		.loc 1 44 3 view .LVU64
 241 0006 0022     		movs	r2, #0
 242 0008 1A64     		str	r2, [r3, #64]
  45:Core/Src/supercap.c **** };
 243              		.loc 1 45 1 is_stmt 0 view .LVU65
 244 000a 7047     		bx	lr
 245              	.L11:
 246              		.align	2
 247              	.L10:
 248 000c 00000000 		.word	htim1
 249              		.cfi_endproc
ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 6


 250              	.LFE333:
 252              		.section	.text.TIM2_NVIC,"ax",%progbits
 253              		.align	1
 254              		.global	TIM2_NVIC
 255              		.syntax unified
 256              		.thumb
 257              		.thumb_func
 259              	TIM2_NVIC:
 260              	.LFB335:
  46:Core/Src/supercap.c **** 
  47:Core/Src/supercap.c **** 
  48:Core/Src/supercap.c **** //帮我在这加入tim2的中断回调函数
  49:Core/Src/supercap.c **** void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim) {
  50:Core/Src/supercap.c **** 	if(htim->Instance == TIM5){
  51:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
  52:Core/Src/supercap.c ****     TIM5_NVIC();
  53:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_RESET);
  54:Core/Src/supercap.c **** 	}
  55:Core/Src/supercap.c ****   else if(htim->Instance == TIM2) {
  56:Core/Src/supercap.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_14, GPIO_PIN_SET);
  57:Core/Src/supercap.c ****     TIM2_NVIC();
  58:Core/Src/supercap.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_14, GPIO_PIN_RESET);
  59:Core/Src/supercap.c ****   }
  60:Core/Src/supercap.c **** }
  61:Core/Src/supercap.c **** 
  62:Core/Src/supercap.c **** void TIM2_NVIC(){
 261              		.loc 1 62 17 is_stmt 1 view -0
 262              		.cfi_startproc
 263              		@ args = 0, pretend = 0, frame = 0
 264              		@ frame_needed = 0, uses_anonymous_args = 0
 265 0000 08B5     		push	{r3, lr}
 266              	.LCFI0:
 267              		.cfi_def_cfa_offset 8
 268              		.cfi_offset 3, -8
 269              		.cfi_offset 14, -4
  63:Core/Src/supercap.c ****     Supercap_Average_ADC_Function(&C_left);
 270              		.loc 1 63 5 view .LVU67
 271 0002 0948     		ldr	r0, .L14
 272 0004 FFF7FEFF 		bl	Supercap_Average_ADC_Function
 273              	.LVL10:
  64:Core/Src/supercap.c ****     Supercap_Average_ADC_Function(&C_sys);
 274              		.loc 1 64 5 view .LVU68
 275 0008 0848     		ldr	r0, .L14+4
 276 000a FFF7FEFF 		bl	Supercap_Average_ADC_Function
 277              	.LVL11:
  65:Core/Src/supercap.c ****     Supercap_Average_ADC_Function(&C_right);
 278              		.loc 1 65 5 view .LVU69
 279 000e 0848     		ldr	r0, .L14+8
 280 0010 FFF7FEFF 		bl	Supercap_Average_ADC_Function
 281              	.LVL12:
  66:Core/Src/supercap.c **** //    Supercap_Average_ADC_Function(&V_sys_op);
  67:Core/Src/supercap.c **** //    Supercap_Average_ADC_Function(&V_cap_op);
  68:Core/Src/supercap.c ****     Supercap_Average_ADC_Function(&V_cap);
 282              		.loc 1 68 5 view .LVU70
 283 0014 0748     		ldr	r0, .L14+12
 284 0016 FFF7FEFF 		bl	Supercap_Average_ADC_Function
 285              	.LVL13:
ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 7


  69:Core/Src/supercap.c ****     Supercap_Average_ADC_Function(&V_bat);
 286              		.loc 1 69 5 view .LVU71
 287 001a 0748     		ldr	r0, .L14+16
 288 001c FFF7FEFF 		bl	Supercap_Average_ADC_Function
 289              	.LVL14:
  70:Core/Src/supercap.c ****     Supercap_Average_ADC_Function(&V_sys);
 290              		.loc 1 70 5 view .LVU72
 291 0020 0648     		ldr	r0, .L14+20
 292 0022 FFF7FEFF 		bl	Supercap_Average_ADC_Function
 293              	.LVL15:
  71:Core/Src/supercap.c **** 		
  72:Core/Src/supercap.c **** //		Supercap_Average_ADC_Function(&V_1V6);
  73:Core/Src/supercap.c **** 
  74:Core/Src/supercap.c **** }
 294              		.loc 1 74 1 is_stmt 0 view .LVU73
 295 0026 08BD     		pop	{r3, pc}
 296              	.L15:
 297              		.align	2
 298              	.L14:
 299 0028 00000000 		.word	C_left
 300 002c 00000000 		.word	C_sys
 301 0030 00000000 		.word	C_right
 302 0034 00000000 		.word	V_cap
 303 0038 00000000 		.word	V_bat
 304 003c 00000000 		.word	V_sys
 305              		.cfi_endproc
 306              	.LFE335:
 308              		.section	.text.TIM5_NVIC,"ax",%progbits
 309              		.align	1
 310              		.global	TIM5_NVIC
 311              		.syntax unified
 312              		.thumb
 313              		.thumb_func
 315              	TIM5_NVIC:
 316              	.LFB336:
  75:Core/Src/supercap.c **** 
  76:Core/Src/supercap.c **** //This is the control NVIC
  77:Core/Src/supercap.c **** void TIM5_NVIC(){
 317              		.loc 1 77 17 is_stmt 1 view -0
 318              		.cfi_startproc
 319              		@ args = 0, pretend = 0, frame = 0
 320              		@ frame_needed = 0, uses_anonymous_args = 0
 321 0000 10B5     		push	{r4, lr}
 322              	.LCFI1:
 323              		.cfi_def_cfa_offset 8
 324              		.cfi_offset 4, -8
 325              		.cfi_offset 14, -4
  78:Core/Src/supercap.c ****   Supercap_PID_Controller_Function(&Out_loop_PID, &V_sys_op, 1);
 326              		.loc 1 78 3 view .LVU75
 327 0002 0A4C     		ldr	r4, .L18
 328 0004 B7EE000A 		vmov.f32	s0, #1.0e+0
 329 0008 0949     		ldr	r1, .L18+4
 330 000a 2046     		mov	r0, r4
 331 000c FFF7FEFF 		bl	Supercap_PID_Controller_Function
 332              	.LVL16:
  79:Core/Src/supercap.c ****   Supercap_PID_Controller_Function(&In_loop_PID, &V_cap_op, Out_loop_PID.output);
 333              		.loc 1 79 3 view .LVU76
ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 8


 334              		.loc 1 79 73 is_stmt 0 view .LVU77
 335 0010 A389     		ldrh	r3, [r4, #12]
 336 0012 00EE103A 		vmov	s0, r3	@ int
 337              		.loc 1 79 3 view .LVU78
 338 0016 074C     		ldr	r4, .L18+8
 339 0018 B8EE400A 		vcvt.f32.u32	s0, s0
 340 001c 0649     		ldr	r1, .L18+12
 341 001e 2046     		mov	r0, r4
 342 0020 FFF7FEFF 		bl	Supercap_PID_Controller_Function
 343              	.LVL17:
  80:Core/Src/supercap.c ****   Supercap_PWM_left(In_loop_PID.output);
 344              		.loc 1 80 3 is_stmt 1 view .LVU79
 345 0024 A089     		ldrh	r0, [r4, #12]
 346 0026 FFF7FEFF 		bl	Supercap_PWM_left
 347              	.LVL18:
  81:Core/Src/supercap.c **** }
 348              		.loc 1 81 1 is_stmt 0 view .LVU80
 349 002a 10BD     		pop	{r4, pc}
 350              	.L19:
 351              		.align	2
 352              	.L18:
 353 002c 00000000 		.word	Out_loop_PID
 354 0030 00000000 		.word	V_sys_op
 355 0034 00000000 		.word	In_loop_PID
 356 0038 00000000 		.word	V_cap_op
 357              		.cfi_endproc
 358              	.LFE336:
 360              		.section	.text.HAL_TIM_PeriodElapsedCallback,"ax",%progbits
 361              		.align	1
 362              		.global	HAL_TIM_PeriodElapsedCallback
 363              		.syntax unified
 364              		.thumb
 365              		.thumb_func
 367              	HAL_TIM_PeriodElapsedCallback:
 368              	.LVL19:
 369              	.LFB334:
  49:Core/Src/supercap.c **** 	if(htim->Instance == TIM5){
 370              		.loc 1 49 61 is_stmt 1 view -0
 371              		.cfi_startproc
 372              		@ args = 0, pretend = 0, frame = 0
 373              		@ frame_needed = 0, uses_anonymous_args = 0
  49:Core/Src/supercap.c **** 	if(htim->Instance == TIM5){
 374              		.loc 1 49 61 is_stmt 0 view .LVU82
 375 0000 10B5     		push	{r4, lr}
 376              	.LCFI2:
 377              		.cfi_def_cfa_offset 8
 378              		.cfi_offset 4, -8
 379              		.cfi_offset 14, -4
  50:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
 380              		.loc 1 50 2 is_stmt 1 view .LVU83
  50:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
 381              		.loc 1 50 9 is_stmt 0 view .LVU84
 382 0002 0368     		ldr	r3, [r0]
  50:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_SET);
 383              		.loc 1 50 4 view .LVU85
 384 0004 134A     		ldr	r2, .L26
 385 0006 9342     		cmp	r3, r2
ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 9


 386 0008 03D0     		beq	.L24
  55:Core/Src/supercap.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_14, GPIO_PIN_SET);
 387              		.loc 1 55 8 is_stmt 1 view .LVU86
  55:Core/Src/supercap.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_14, GPIO_PIN_SET);
 388              		.loc 1 55 10 is_stmt 0 view .LVU87
 389 000a B3F1804F 		cmp	r3, #1073741824
 390 000e 10D0     		beq	.L25
 391              	.LVL20:
 392              	.L20:
  60:Core/Src/supercap.c **** 
 393              		.loc 1 60 1 view .LVU88
 394 0010 10BD     		pop	{r4, pc}
 395              	.LVL21:
 396              	.L24:
 397              	.LBB2:
  51:Core/Src/supercap.c ****     TIM5_NVIC();
 398              		.loc 1 51 3 is_stmt 1 view .LVU89
 399 0012 114C     		ldr	r4, .L26+4
 400 0014 0122     		movs	r2, #1
 401 0016 4FF40041 		mov	r1, #32768
 402 001a 2046     		mov	r0, r4
 403              	.LVL22:
  51:Core/Src/supercap.c ****     TIM5_NVIC();
 404              		.loc 1 51 3 is_stmt 0 view .LVU90
 405 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
 406              	.LVL23:
  52:Core/Src/supercap.c **** 		HAL_GPIO_WritePin(GPIOB, GPIO_PIN_15, GPIO_PIN_RESET);
 407              		.loc 1 52 5 is_stmt 1 view .LVU91
 408 0020 FFF7FEFF 		bl	TIM5_NVIC
 409              	.LVL24:
  53:Core/Src/supercap.c **** 	}
 410              		.loc 1 53 3 view .LVU92
 411 0024 0022     		movs	r2, #0
 412 0026 4FF40041 		mov	r1, #32768
 413 002a 2046     		mov	r0, r4
 414 002c FFF7FEFF 		bl	HAL_GPIO_WritePin
 415              	.LVL25:
 416              	.LBE2:
 417 0030 EEE7     		b	.L20
 418              	.LVL26:
 419              	.L25:
  56:Core/Src/supercap.c ****     TIM2_NVIC();
 420              		.loc 1 56 5 view .LVU93
 421 0032 094C     		ldr	r4, .L26+4
 422 0034 0122     		movs	r2, #1
 423 0036 4FF48041 		mov	r1, #16384
 424 003a 2046     		mov	r0, r4
 425              	.LVL27:
  56:Core/Src/supercap.c ****     TIM2_NVIC();
 426              		.loc 1 56 5 is_stmt 0 view .LVU94
 427 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 428              	.LVL28:
  57:Core/Src/supercap.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_14, GPIO_PIN_RESET);
 429              		.loc 1 57 5 is_stmt 1 view .LVU95
 430 0040 FFF7FEFF 		bl	TIM2_NVIC
 431              	.LVL29:
  58:Core/Src/supercap.c ****   }
ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 10


 432              		.loc 1 58 5 view .LVU96
 433 0044 0022     		movs	r2, #0
 434 0046 4FF48041 		mov	r1, #16384
 435 004a 2046     		mov	r0, r4
 436 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 437              	.LVL30:
  60:Core/Src/supercap.c **** 
 438              		.loc 1 60 1 is_stmt 0 view .LVU97
 439 0050 DEE7     		b	.L20
 440              	.L27:
 441 0052 00BF     		.align	2
 442              	.L26:
 443 0054 000C0040 		.word	1073744896
 444 0058 00040048 		.word	1207960576
 445              		.cfi_endproc
 446              	.LFE334:
 448              		.text
 449              	.Letext0:
 450              		.file 2 "C:/Program Files (x86)/Arm GNU Toolchain arm-none-eabi/13.2 Rel1/arm-none-eabi/include/ma
 451              		.file 3 "C:/Program Files (x86)/Arm GNU Toolchain arm-none-eabi/13.2 Rel1/arm-none-eabi/include/sy
 452              		.file 4 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g473xx.h"
 453              		.file 5 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 454              		.file 6 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_gpio.h"
 455              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 456              		.file 8 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 457              		.file 9 "Core/Inc/supercap.h"
 458              		.file 10 "Core/Inc/tim.h"
ARM GAS  C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s 			page 11


DEFINED SYMBOLS
                            *ABS*:00000000 supercap.c
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:21     .text.ADC_to_Voltage_Funtion:00000000 $t
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:27     .text.ADC_to_Voltage_Funtion:00000000 ADC_to_Voltage_Funtion
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:54     .text.ADC_to_Voltage_Funtion:0000001c $d
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:60     .text.Supercap_Average_ADC_Function:00000000 $t
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:66     .text.Supercap_Average_ADC_Function:00000000 Supercap_Average_ADC_Function
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:94     .text.Supercap_PID_Controller_Function:00000000 $t
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:100    .text.Supercap_PID_Controller_Function:00000000 Supercap_PID_Controller_Function
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:183    .text.Supercap_PID_Init:00000000 $t
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:189    .text.Supercap_PID_Init:00000000 Supercap_PID_Init
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:222    .text.Supercap_PWM_left:00000000 $t
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:228    .text.Supercap_PWM_left:00000000 Supercap_PWM_left
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:248    .text.Supercap_PWM_left:0000000c $d
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:253    .text.TIM2_NVIC:00000000 $t
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:259    .text.TIM2_NVIC:00000000 TIM2_NVIC
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:299    .text.TIM2_NVIC:00000028 $d
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:309    .text.TIM5_NVIC:00000000 $t
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:315    .text.TIM5_NVIC:00000000 TIM5_NVIC
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:353    .text.TIM5_NVIC:0000002c $d
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:361    .text.HAL_TIM_PeriodElapsedCallback:00000000 $t
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:367    .text.HAL_TIM_PeriodElapsedCallback:00000000 HAL_TIM_PeriodElapsedCallback
C:\Users\purdu\AppData\Local\Temp\cc2Sv7fu.s:443    .text.HAL_TIM_PeriodElapsedCallback:00000054 $d

UNDEFINED SYMBOLS
htim1
C_left
C_sys
C_right
V_cap
V_bat
V_sys
Out_loop_PID
V_sys_op
In_loop_PID
V_cap_op
HAL_GPIO_WritePin
